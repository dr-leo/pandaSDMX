language: python

jobs:
  include:
  # Linux jobs
  - python: 3.7.3  # earliest
  - python: 3.7
  - python: 3.8
  # Non-linux jobs; Python configured below
  - os: osx
    osx_image: xcode11.2
    language: shell
  - os: windows
    language: shell
    before_install:
      - choco install python --version 3.8.0
      #- python -m pip install --upgrade pip
    env: PATH=/c/Python38:/c/Python38/Scripts:$PATH

install: 
  - pip3 install --upgrade pip  # all three OSes agree about 'pip3'
  - pip3 install --requirement requirements.txt
- pip3 install .[cache,doc,test]

script: >
  pytest
  -ra
  --verbose
  -m "not experimental"
  --cov pandasdmx --cov-report term-missing

after_success:
- coverage combine
- codecov

notifications:
  email: false
